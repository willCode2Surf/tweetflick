define=function(){if(typeof wink=="undefined")wink={};var c=arguments,a=c.length;return(a==1?c[0]:a==2?c[1]:c[2])(wink)};define.amd={vendor:"winktoolkit.org"};define(function(){if(typeof wink=="undefined")wink={};return wink});
define(["../../_kernel/js/kernel"],function(c){c.version="1.4.2";c.api={};c.mm={};c.net={};c.plugins={};c.ui={form:{},layout:{},xy:{},xyz:{}};c.ux={};var a=Array.prototype.slice,d=window;c.byId=function(e){return c.isString(e)?document.getElementById(e):e};c.query=function(e,g){return new b(e,g)};var b=function(){var e=function(j,k){c.isUndefined(e.prototype.initialized)&&this.init();var o;try{o=a.call((k||document).querySelectorAll(j))}catch(r){o=[]}for(var m=this.length=o.length,l=0;l<m;l++)this[l]=
o[l];this.selector=j;return this},g=e.prototype={init:function(){g.each(["pop","push","reverse","shift","sort","splice","unshift","slice","indexOf","lastIndexOf"],function(j,k){g[k]=[][k]});c.query.extend(c,["getPosition","getTopPosition","getLeftPosition"],true);c.query.extend(c.fx,["getTransformPosition","hasClass"],true);c.query.extend(c.fx,["translate","rotate","scale","addClass","removeClass","apply","applyTransition","applyTransformTransition","onTransitionEnd"],false);c.query.extend(c.ux.gesture,
["listenTo","unlistenTo"],false);g.initialized=true},extend:function(j,k,o,r){var m=r||g;r={};var l,n=k.length;for(l=0;l<n;l++){var p=k[l],q=j?j[p]:null;if(c.isFunction(q))r[p]={c:j,f:q,r:o}}g.each(r,function(s,t){var v=t.f,w=t.c,u=t.r;m[s]=function(){var z=this.size();if(z!=0){var B,D=this.toArray(),x=[],y=this.splice.call(arguments,0);for(B=0;B<z;B++)x.push(v.apply(w,[D[B]].concat(y)));if(!u)return this;if(x.length==1)return x[0];return x}}})},size:function(){return this.length},toArray:function(){return a.call(this,
0)},each:function(j,k){for(i in j){var o=j[i];k.call(o,i,o)}}};return e}();c.query.extend=b.prototype.extend;var f="en_EN";c.setLocale=function(e){f=e};c.translate=function(e,g){var j=e,k=window.i18n||{};if(c.isSet(g)&&c.isSet(g.i18n))k=g.i18n;var o=k[f];if(c.isUndefined(o))o=k;k=o[e];c.isUndefined(k)||(j=k);return j};c.isUndefined=function(e){return e===undefined};c.isNull=function(e){return e===null};c.isSet=function(e){return!c.isUndefined(e)&&!c.isNull(e)};c.isCallback=function(e){return!!(e&&
e.method||c.isFunction(e))};c.isString=function(e){return typeof e=="string"||e instanceof String};c.isInteger=function(e){return parseInt(e)===e};c.isNumber=function(e){return typeof e=="number"||e instanceof Number};c.isArray=function(e){return typeof e=="array"||e instanceof Array};c.isBoolean=function(e){return typeof e=="boolean"||e instanceof Boolean};c.isFunction=function(e){return Object.prototype.toString.call(e)==="[object Function]"};c.trim=function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,
"")};c.bind=function(e,g){var j=a.call(arguments,2);return function(){var k=j.concat(a.call(arguments,0));return e.apply(g,k)}};c.call=function(e,g){if(c.isFunction(e))return e.apply(d,c.isArray(g)?g:[g]);var j=d,k=e.method,o=[];if(c.isSet(e.context))j=e.context;if(arguments.length==2)o=[g];if(c.isSet(e.arguments)){var r=e.arguments;c.isArray(r)||(r=[e.arguments]);o=o.concat(r)}return j[k].apply(j,o)};c.connect=function(e,g,j){var k=c.isFunction(j);if(!k&&!c.isSet(j.context))j.context=d;var o=e[g];
if(c.isNull(o)||c.isUndefined(o.cbs)){var r=function(){var n=r.target,p=[].splice.call(arguments,0);n&&n.apply(e,p);var q=r.cbs,s=q.length;for(n=0;n<s;n++){var t=q[n];c.isFunction(t)?c.call(t,p):c.call({context:t.context,method:t.method,arguments:p.concat(t.arguments)})}};r.target=o;r.cbs=[];o=e[g]=r}o=o.cbs;var m=o.length;for(g=0;g<m;g++){var l=o[g];if(k&&j==l||!k&&l.context==j.context&&l.method==j.method)return}o.push(j)};c.disconnect=function(e,g,j){var k=c.isFunction(j);if(!k&&!c.isSet(j.context))j.context=
d;e=e[g];if(!c.isUndefined(e.cbs)){g=e.cbs;var o=g.length;for(e=0;e<o;e++){var r=g[e];if(k&&j==r||!k&&r.context==j.context&&r.method==j.method){g.splice(e,1);break}}}};c.setTimeout=function(e,g,j){var k=a.call(arguments,3);return setTimeout(function(){e[g].apply(e,k)},j)};c.setInterval=function(e,g,j){var k=a.call(arguments,3);return setInterval(function(){e[g].apply(e,k)},j)};c.getPosition=function(e,g,j){var k={x:0,y:0};for(e=e;e&&e!=g;){k.x+=e.offsetLeft;k.y+=e.offsetTop;if(j){k.x+=c.fx.getTransformPosition(e).x;
k.y+=c.fx.getTransformPosition(e).y}e=e.offsetParent}return k};c.getTopPosition=function(e,g,j){return c.getPosition(e,g,j).y};c.getLeftPosition=function(e,g,j){return c.getPosition(e,g,j).x};var h=100;c.getUId=function(){return h+=1};if(c.isUndefined(d._))_=c.bind(c.translate,c);if(c.isUndefined(d.$))$=function(){return c.query.apply(c,arguments)};if(c.isUndefined(d.$$))$$=c.bind(c.query,c);return c});define(["../../../_amd/core"],function(){return wink});
define(["../../../_amd/core"],function(){wink.error={logLevel:0,log:function(c){if(this.logLevel==1)typeof console!="undefined"?console.log(c):alert(c)}};wink.log=wink.bind(wink.error.log,wink.error);return wink.error});
define(["../../../_amd/core"],function(){var c=window.JSON;wink.json={parse:function(a){if(wink.isSet(c)&&wink.isSet(c.parse))return c.parse(a);else{var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;a=String(a);d.lastIndex=0;if(d.test(a))a=a.replace(d,function(f){return"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))var b=eval("("+a+")");return b}},concat:function(a,d){for(var b in d)a[b]=d[b];return a}};wink.parseJSON=wink.bind(wink.json.parse,wink.json);wink.mixin=wink.bind(wink.json.concat,wink.json);return wink.json});
define(["../../../_amd/core"],function(){function c(f,h){if(wink.isCallback(h)){var e=[f.toLowerCase(),h];b.push(e)}}function a(f,h){var e=f.toLowerCase(),g=wink.isFunction(h),j,k=b.length;for(j=0;j<k;j++){var o=b[j];if(o[0]==e&&(g&&h==o[1]||!g&&o[1].method==h.method&&o[1].context==h.context)){b.splice(j,1);break}}}function d(f,h){var e=f.toLowerCase(),g,j=b.length;for(g=0;g<j;g++){var k=b[g];k&&k[0]==e&&wink.isSet(k[1])&&wink.call(k[1],h)}}var b=[];wink.topics={_getTopics:function(){return b}};wink.topics.subscribe=
c;wink.topics.unsubscribe=a;wink.topics.publish=d;wink.publish=d;wink.subscribe=c;wink.unsubscribe=a;return wink.topics});
define(["../../../_amd/core"],function(){var c,a,d,b,f,h,e,g,j,k,o,r,m,l,n,p,q,s,t,v,w,u,z,B;c=a=d=b=f=h=e=g=w=u=z=B=false;j=k=o=r=m=l=n=p=q=0;var D=wink.isSet;a=function(y,E){return RegExp(y).test(E)};var x=function(y,E,C){var F={v:0,r:0,u:0};y=RegExp(E).exec(y);if(D(y)&&y.length>1){y=y[2];E=RegExp("[^\\"+C+"0-9]").exec(y);if(D(E))y=y.slice(0,E.index);C=y.split(C);if(C.length>0)F.v=C[0];if(C.length>1)F.r=C[1];if(C.length>2)F.u=C[2];if(C.length>3)F.u+="."+C[3]}return F};c=navigator||{};s=c.userAgent;
t=c.platform;v=c.appVersion;c=a(" AppleWebKit/",s);u=a(/bada/gi,s);z=a(/Opera/gi,s);if(D(t)){if(a(/iphone/i,t))d=true;if(a(/ipod/i,t))b=true;if(a(/ipad/i,t))f=true;if(a(/blackberry/i,t))w=true}if(D(v)){if(a(/android/i,v))h=true;if(a(/safari/i,v)){e=true;t=x(v,"( Version/)([^ ]+)",".");r=t.v;m=t.r;l=t.u}if(a(/MSIE/i,v)){B=true;t=x(v,"( MSIE )([^ ]+)",".");r=t.v;m=t.r}}if(!e&&!c)g=a(/mozilla/i,s);a=d||b||h||w||u||a(" Mobile/",s);if(c){t=x(s,"( AppleWebKit/)([^ ]+)",".");j=t.v;k=t.r;o=t.u}if(a&&D(v)){n=
h?["( Android )([^ ]+)","."]:["( OS )([^ ]+)","_"];if(w)n=["( BlackBerry )([^ ]+)","."];x=x(v,n[0],n[1]);n=x.v;p=x.r;q=x.u}wink.ua={isWebkit:c,isMobile:a,isIPhone:d,isIPod:b,isIPad:f,isIOS:d||b||f,isAndroid:h,isBlackBerry:w,isBada:u,isOpera:z,isSafari:e,isMozilla:g,isIE:B,webkitVersion:j,webkitMinorVersion:k,webkitUpdateVersion:o,browserVersion:r,browserMinorVersion:m,browserUpdateVersion:l,osVersion:n,osMinorVersion:p,osUpdateVersion:q};return wink.ua});
define(["../../../_amd/core"],function(){function c(h){if(f(d[h]))d[h]=d[h]();return d[h]}function a(h,e,g){if(typeof d[h]=="undefined"){var j=e;if(g&&f(e))j=e();d[h]=j}}var d={},b={},f=wink.isFunction;wink.has=c;wink.has.prefixes=["-webkit-","-moz-","-o-","ms-","-khtml-"];wink.has.prefix=null;wink.has.inquire=a;wink.has.inquireMap=function(h,e){if(!(!h||h.length==0))for(var g in h)a(g,h[g],e)};wink.has.setProp=function(h,e){b[h]=e};wink.has.deferProp=function(h,e){b[h]=f(e)?e:function(){c(e)}};wink.has.prop=
function(h){var e=b[h];if(f(e)){e();e=b[h];if(f(e))e=h}return e||h};return wink.has});define(["../../../_amd/core"],function(){var c=wink.has,a=c.inquireMap,d=window;a({"json-parse":function(){var b;b=false;if(d.JSON&&typeof JSON.parse=="function"){b=JSON.parse('{"w":1}');b=!!(b&&b.w)}return b},"json-stringify":function(){var b;b=false;if(d.JSON&&typeof JSON.stringify=="function"){b=JSON.stringify({w:true});b=b=='{"w":true}'}return b}});return c});
define(["../../../_amd/core"],function(){function c(l){var n=false;if(typeof k[l]==r){f(l,l);n=true}else{var p=d.prefix;p=p!=null?[p]:o;var q,s=p.length;for(q=0;q<s;q++){var t,v=p[q]+l;t=v;var w=/(-)([a-z])/;for(v=v.match(w);v!=null;){t=t.replace(w,RegExp.$2.toUpperCase());v=t.match(w)}t=t;if(typeof k[t]==r){d.prefix=p[q];f(l,t);n=true;break}}}return n}function a(l){return function(){c(l)}}var d=wink.has,b=d.inquireMap,f=d.setProp,h=d.deferProp,e=window,g=e.document,j=g.createElement("div"),k=j.style,
o=d.prefixes,r="string",m={a:"transform-property",b:"transition-property",c:"transition-duration",d:"transition-delay",e:"transition-timing-function",f:"border-radius",g:"text-shadow",h:"box-shadow",i:"gradient",j:"perspective",k:"transform-origin",l:"transform-style",m:"transform",n:"css-transition",o:"css-perspective",p:"css-transform",q:"perspective-origin",r:"backface-visibility",s:"tap-highlight-color",t:"user-select",bg:"background-image",tr:"transition",an:"animation"};h(m.a,m.p);h(m.m,m.p);
h(m.b,m.n);h(m.c,m.n);h(m.d,m.n);h(m.e,m.n);h(m.f,"css-border-radius");h(m.g,"css-text-shadow");h(m.h,"css-box-shadow");h(m.i,"css-gradient");h(m.j,m.o);h(m.k,m.o);h(m.l,m.o);h(m.q,m.o);h(m.tr,m.n);h(m.an,"css-animation");h(m.r,a(m.r));h(m.s,a(m.s));h(m.t,a(m.t));b({"css-transform":function(){var l=c(m.m),n=d.prefix,p=m.m;if(n!=null)p=n+p;l?f(m.a,d.prop(m.m)):f(m.a,m.m);f(m.m,p);return l},"css-transition":function(){var l=true;return l=(l=(l=(l=(l=l&&c(m.b))&&c(m.c))&&c(m.d))&&c(m.e))&&c(m.tr)},"css-animation":function(){return c(m.an)},
"css-translate3d":function(){return d("css-matrix")},"css-border-radius":function(){return c(m.f)},"css-text-shadow":function(){return c(m.g)},"css-box-shadow":function(){return c(m.h)},"css-gradient":function(){var l=m.i,n=m.bg,p=d.prefix;p=p!=null?["",p]:[""].concat(o);var q,s=p.length;for(q=0;q<s;q++){var t=p[q]+l;k.cssText=n+":"+(t+"(linear,left top,right bottom,from(#9f9),to(white));");if(k[n]&&k[n].indexOf(l)!=-1){f(l,t);return true}}return false},"css-perspective":function(){var l=c(m.j)&&
c(m.k)&&c(m.l)&&c(m.q);l=l&&c(m.k+"-x")&&c(m.k+"-y")&&c(m.k+"-z");if(!l)return false;var n=d.prefix||"";l=g.createElement("style");l.textContent="@media ("+n+"transform-3d){#wink_has{height:2px}}";g.getElementsByTagName("head")[0].appendChild(l);j.id="wink_has";g.documentElement.appendChild(j);n=j.offsetHeight===2;l.parentNode.removeChild(l);j.parentNode.removeChild(j);return n},"css-matrix":function(){var l=e.WebKitCSSMatrix;if(typeof l=="undefined")return false;var n=new l("matrix(1,0,0,1,6,7)"),
p=n.m41==6&&n.m42==7&&n.m41==n.e&&n.m42==n.f;if(p){l=new l("matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,6,7,8,1)");p=p&&n.m41==l.m41&&n.m42==l.m42&&l.m43==8}return p},"css-matrix-stack-inversed":function(){var l=wink.ua;if(!d("css-matrix")||!l)return false;var n=l.isIOS?parseInt(""+l.osVersion+l.osMinorVersion+l.osUpdateVersion):500;l=l.isAndroid?parseInt(""+l.osVersion+l.osMinorVersion+l.osUpdateVersion):300;return n<421||l<300},"css-position-fixed":function(){var l=wink.ua;if(l.isAndroid&&l.osVersion==2&&
l.osMinorVersion==1||l.isBada)return false;if(l.isIOS)return l.osVersion<5?false:true;l=document.body;if(document.createElement&&l&&l.appendChild&&l.removeChild){if(!j.getBoundingClientRect)return null;j.innerHTML="x";j.style.cssText="position:fixed;top:100px;";l.appendChild(j);var n=l.style.height,p=l.scrollTop;l.style.height="3000px";l.scrollTop=500;var q=j.getBoundingClientRect().top;l.style.height=n;n=q===100;l.removeChild(j);l.scrollTop=p;return n}return false},"css-overflow-scrolling":function(){return c("overflow-scrolling")}});
return d});
define(["../../../_amd/core"],function(){function c(j){return"on"+g[j]in e}var a=wink.has,d=a.inquireMap,b=a.setProp,f=a.deferProp,h=window,e=h.document.documentElement,g={ts:"touchstart",tm:"touchmove",te:"touchend",gs:"gesturestart",gc:"gesturechange",ge:"gestureend",tre:"transitionend"};f(g.ts,g.ts);f(g.tm,g.tm);f(g.te,g.te);f(g.tre,g.tre);d({touchstart:function(){var j=c("ts");b(g.ts,j?g.ts:"mousedown");return j},touchmove:function(){var j=c("tm");b(g.tm,j?g.tm:"mousemove");return j},touchend:function(){var j=
c("te");b(g.te,j?g.te:"mouseup");return j},touch:function(){return a(g.ts)&&a(g.tm)&&a(g.te)},gesturestart:function(){return c("gs")},gesturechange:function(){return c("gc")},gestureend:function(){return c("ge")},gesture:function(){return a(g.gs)&&a(g.gc)&&a(g.ge)},transitionend:function(){if(a("css-transition")){var j=a.prefix,k=g.tre;if(j=="-webkit-")k="webkitTransitionEnd";else if(j=="-o-")k="oTransitionEnd";b(g.tre,k);return true}return false},hashchange:function(){return"onhashchange"in h}});
return a});
define(["../../../_amd/core"],function(){var c=wink.has.inquireMap,a=window.document,d=a.documentElement;c({dynamicBase:function(){var b,f=a.createElement("head"),h=a.createElement("body");b=a.getElementsByTagName("base");var e=location.protocol+"//"+location.host,g=e+"/old/";d.appendChild(f);d.appendChild(h);if(b.length>0){b=b[0];g=b.href}else{b=a.createElement("base");b.href=g;f.appendChild(b)}var j=a.createElement("a");j.href="rlt";h.appendChild(j);var k=j.pathname;b.href=e+"/new/";e=j.pathname;
d.removeChild(f);d.removeChild(h);b.href=g;return k!==e}});return wink.has});
define(["../../../_amd/core"],function(){function c(n,p){var q=n.className;if((" "+q+" ").indexOf(" "+p+" ")<0)n.className=q+(q?" ":"")+p}function a(n,p){var q=wink.trim((" "+n.className+" ").replace(" "+p+" "," "));if(n.className!=q)n.className=q}function d(n,p){return(" "+n.className+" ").indexOf(" "+p+" ")>=0}function b(n,p){var q,s=n.style;for(q in p){var t=r(q);s[t]=p[q]}}function f(n,p,q,s,t){var v=p;if(p.indexOf(",")==-1)v=r(p);else{p=p.split(",");var w=p.length;for(v=0;v<w;v++)p[v]=r(wink.trim(p[v]));
v=p.join(",")}b(n,{"transition-property":v,"transition-duration":q,"transition-delay":s,"transition-timing-function":t})}function h(n,p,q,s){l(n,p,q,m.u,m.u,m.u,s)}function e(n,p,q){l(n,m.u,m.u,p,q,m.u,m.u)}function g(n,p){l(n,m.u,m.u,m.u,m.u,p,m.u)}function j(n){return window.getComputedStyle(n)[r("transform-property")]}function k(n,p){b(n,{"transform-property":p})}var o=wink.isSet,r=wink.has.prop,m={u:undefined};wink.fx={};wink.fx.addClass=c;wink.fx.removeClass=a;wink.fx.hasClass=d;wink.fx.apply=
b;wink.fx.applyTransition=f;wink.fx.applyTransformTransition=function(n,p,q,s){f(n,"transform",p,q,s)};wink.fx.onTransitionEnd=function(n,p,q){var s=r("transitionend"),t=function(v){q!==true&&n.removeEventListener(s,t,false);p(v)};n.addEventListener(s,t,false);return t};wink.fx.getTransformPosition=function(n){var p={x:null,y:null};n=j(n);if(wink.has("css-matrix")){if(n=="none")n="";n=new WebKitCSSMatrix(n);p.x=n.m41;p.y=n.m42}else{var q=RegExp(/matrix/i);if(q.test(n)){q=RegExp("[, ()]+","g");n=n.split(q);
if(n.length>6&&n[0]=="matrix"){p.x=parseInt(n[5]);p.y=parseInt(n[6])}}}return p};wink.fx.applyTranslate=h;wink.fx.translate=h;wink.fx.applyScale=e;wink.fx.scale=e;wink.fx.applyRotate=g;wink.fx.rotate=g;wink.fx.getTransform=j;wink.fx.setTransform=k;var l=function(n,p,q,s,t,v,w){var u=n._cssT||{};u=n._cssT={t:o(p)||o(q)?{tx:p,ty:q}:u.t,s:o(s)||o(t)?{sx:s,sy:t}:u.s,r:o(v)?{a:v}:u.r};s=u.t&&(o(u.t.tx)||o(u.t.ty));q=u.s&&(o(u.s.sx)||o(u.s.sy));p=u.r&&o(u.r.a);if(!wink.has("css-translate3d")||wink.ua.isAndroid&&
(q||p))w=true;if(s){t=u.t.ty;w=w;s="";s=u.t.tx;o(s)||(s=0);t=t;o(t)||(t=0);v="0";var z=false;z=(z=z||wink.isString(s)&&s.indexOf("%",0)!=-1)||wink.isString(t)&&t.indexOf("%",0)!=-1;if(!z){s+="px";t+="px";v+="px"}w=s=w?"translate("+s+", "+t+")":"translate3d("+s+", "+t+", "+v+")"}else w="";w=w;if(q){q=u.s.sy;s="";s=u.s.sx;o(s)||(s=1);q=q;o(q)||(q=1);q=s=wink.has("css-perspective")?"scale3d("+s+", "+q+", 1)":"scale("+s+", "+q+")"}else q="";q=q;if(p){p="";u=u.r.a;o(u)||(u=0);u=p="rotate("+u+"deg)"}else u=
"";u=wink.trim(w+" "+q+" "+u);k(n,u)};wink.addClass=c;wink.removeClass=a;wink.hasClass=d;return wink.fx});define(["../../../_amd/core"],function(){wink.math={round:function(c,a){wink.isSet(a)||(a=0);var d=Math.pow(10,a);return Math.round(c*d)/d},modulo:function(c,a){var d=c%a;return d<0?d+a:d}};return wink.math});
define(["../../../_amd/core"],function(){var c=wink.isSet;wink.ux.Event=function(a){this.uId=wink.getUId();this.multitouch=this.srcEvent=this.target=this.timestamp=this.y=this.x=this.type=null;wink.mixin(this,a);this._validateProperties()};wink.ux.Event.prototype={preventDefault:function(){this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},dispatch:function(a,d){var b=this.srcEvent,f=b.type;if(c(d))f=d;f=f;var h="HTMLEvents";if(/blur|focus|resize|scroll/i.test(f))h=
"UIEvent";else if(/click|mouse(down|move|up)/i.test(f))h="MouseEvent";else if(/touch(start|move|end|cancel)/i.test(f))h="TouchEvent";var e=document.createEvent(h),g=b.changedTouches;if(h=="HTMLEvents")e.initEvent(f,b.bubbles,b.cancelable);else if(h=="UIEvent")e.initUIEvent(f,b.bubbles,b.cancelable,window,b.detail);else if(h=="MouseEvent"){h=b.screenX;var j=b.screenY,k=b.clientX,o=b.clientY;if(b.initTouchEvent&&g&&g.length>0){g=g[0];h=g.screenX;j=g.screenY;k=g.clientX;o=g.clientY}e.initMouseEvent(f,
b.bubbles,b.cancelable,document.defaultView,b.detail,h,j,k,o,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}else h=="TouchEvent"&&e.initTouchEvent(f,b.bubbles,b.cancelable,window,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.touches,b.targetTouches,g,b.scale,b.rotation);a.dispatchEvent(e)},_validateProperties:function(){return true}};return wink.ux.Event});
define(["../../../_amd/core"],function(){function c(g){var j={};j.x=g.pageX;j.y=g.pageY;j.target=g.target;return j}var a=[],d=wink.has.prop,b={start:d("touchstart"),move:d("touchmove"),end:d("touchend"),gesturestart:d("gesturestart"),gesturechange:d("gesturechange"),gestureend:d("gestureend")},f={};for(var h in b)f[b[h]]=h;wink.ux.touch={};wink.ux.touch.addListener=function(g,j,k,o){if(wink.isUndefined(b[j])){wink.log("[touch] Cannot add listener for unknown eventType: "+j);return false}wink.isSet(o)||
(o={});if(o===true)o={preventDefault:true};o={preventDefault:o.preventDefault===true?true:false,tracking:o.tracking===false?false:true,captureFlow:o.captureFlow===true?true:false};var r=null,m=e(g);if(m==null){r=new wink.ux.touch.Element({domNode:g,tracking:o.tracking});a.push(r)}else r=a[m];if(!r.isListening(j)){if(r.eventHandler==null)r.eventHandler=function(l){var n=r,p=f[l.type],q={};q.type=p;q.srcEvent=l;q.timestamp=l.timeStamp;q.multitouch=false;if(!q.timestamp)q.timestamp=(new Date).getTime();
if(wink.has("touch"))if(p=="gesturestart"||p=="gesturechange"||p=="gestureend"){q.target=l.target;q.x=0;q.y=0}else{var s=null;if(p=="end"){if(l.changedTouches&&l.changedTouches.length>0)s=l.changedTouches[0]}else if(l.targetTouches&&l.targetTouches.length>0)s=l.targetTouches[0];else if(l.changedTouches&&l.changedTouches.length>0)s=l.changedTouches[0];if(s!=null){s=c(s);q.x=s.x;q.y=s.y;q.target=s.target;if(l.touches&&l.touches.length>1)q.multitouch=true}}else{s=c(l);q.x=s.x;q.y=s.y;q.target=s.target}l=
new wink.ux.Event(q);if(!n.isListening("start")||n.tracking==false)n.tracked=true;else if(p=="start")n.tracked=true;if(n.tracked==true){if(p=="end")n.tracked=false;n.notifyEvent(l)}};r.eventCaptures[j]=o.captureFlow;r.domNode.addEventListener(b[j],r.eventHandler,r.eventCaptures[j])}r.addEventCallback(j,k,o.preventDefault)};wink.ux.touch.removeListener=function(g,j,k){g=e(g);if(g!=null){g=a[g];g.removeEventCallback(j,k);g.isListening(j)||g.domNode.removeEventListener(b[j],g.eventHandler,g.eventCaptures[j])}};
wink.ux.touch.getTouchProperties=c;var e=function(g){var j,k=a.length;for(j=0;j<k;j++)if(a[j].domNode==g)return j;return null};wink.ux.touch.Element=function(g){this.uId=wink.getUId();this.domNode=null;this.tracked=this.tracking=false;this.eventHandler=null;this.eventCaptures={};this._els={};wink.mixin(this,g);this._validateProperties()};wink.ux.touch.Element.prototype={addEventCallback:function(g,j,k){if(!wink.isCallback(j))return false;var o=this._els[g];if(o){g=o.callbacks;k=wink.isFunction(j);
var r,m=g.length;for(r=0;r<m;r++){var l=g[r];if(k&&j==l||!k&&j.context==l.context&&j.method==l.method)return false}}else{o={preventDefault:k,callbacks:[]};this._els[g]=o}o.callbacks.push(j);return true},removeEventCallback:function(g,j){if(!wink.isCallback(j))return false;var k=this._els[g];if(!k)return false;var o=k.callbacks,r=wink.isFunction(j),m,l=o.length;for(m=0;m<l;m++){var n=o[m];if(r&&j==n||!r&&j.context==n.context&&j.method==n.method){k.callbacks.splice(m,1);break}}return true},isListening:function(g){if((g=
this._els[g])&&g.callbacks.length>0)return true;return false},notifyEvent:function(g){var j=this._els[g.type];if(j){j.preventDefault==true&&g.preventDefault();j=j.callbacks;for(var k=0;k<j.length;k++)wink.call(j[k],g)}},_validateProperties:function(){return true}};return wink.ux.touch});
define(["../../../_amd/core"],function(){var c=wink.isSet,a=wink.isArray;wink.net.Xhr=function(d){this.uId=wink.getUId();this.request={xhrObject:null,params:d};this._create()};wink.net.Xhr.prototype={sendData:function(d,b,f,h,e,g){var j=this.request,k=j.xhrObject,o=encodeURIComponent;f=f.toUpperCase();if(!(c(b)&&!a(b))){if(k){var r=null;if(c(b)){var m,l=b.length;for(m=0;m<l;m++){var n=b[m],p=n.name;n=n.value;if(f=="GET")d+=m==0&&d.indexOf("?")==-1?"?"+o(p)+"="+o(n):"&"+o(p)+"="+o(n);else if(m==0)r=
o(p)+"="+o(n);else r+="&"+o(p)+"="+o(n)}}try{k.open(f,d,true);k.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");if(c(g))if(a(g)){l=g.length;for(m=0;m<l;m++){var q=g[m];k.setRequestHeader(q.name,q.value)}}k.send(r)}catch(s){return false}k.onreadystatechange=function(){if(k.readyState==4){var t=k.status;if(t>=200&&t<400||t==0)c(h)&&wink.call(h,j);else c(e)&&wink.call(e,j)}}}else return false;return true}},_create:function(){var d=window.XMLHttpRequest;if(d){var b;
try{b=new d}catch(f){b=false}this.request.xhrObject=b}}};wink.Xhr=wink.net.Xhr;return wink.Xhr});
define(["../../../../_amd/core"],function(){var c=wink.fx.apply,a=null,d=null,b=false;wink.ui.xy.layer={visible:false,color:"#000",opacity:0.3,zIndex:998,show:function(){b||this._initDom();a.onclick=function(){var f=wink.ui.xy.layer.onclick;wink.isSet(f)&&f()};if(!this.visible){c(d,{height:document.body.scrollHeight+"px"});c(a,{display:"block"});this.visible=true}},hide:function(){if(b&&this.visible){c(a,{display:"none"});this.visible=false}},refresh:function(){b&&this.visible&&c(d,{height:document.body.scrollHeight+
"px"})},update:function(){b||this._initDom();c(a,{"z-index":this.zIndex});c(d,{backgroundColor:this.color,opacity:this.opacity})},_initDom:function(){var f=document;a=f.createElement("div");c(a,{position:"absolute",display:"none",top:0,width:"100%","z-index":this.zIndex,"tap-highlight-color":"rgba(0, 0, 0, 0)"});d=f.createElement("div");c(d,{width:"100%",backgroundColor:this.color,opacity:this.opacity});a.appendChild(d);f.body.appendChild(a);b=true}};wink.layer=wink.ui.xy.layer;return wink.layer});
define(["../../../_amd/core"],function(){var c=[];wink.json.stringify=function(b){var f;if(b)f=wink.has("json-stringify")?window.JSON.stringify(b):a(b);return f};var a=function(b){var f;if(b&&wink.isSet(b.toJSON)){f=b.toJSON();if(wink.isString(f))f=d(f)}else if(wink.isString(b))f=d(b);else if(wink.isNumber(b))f=isFinite(b)?b:"null";else if(wink.isNull(b))f="null";else if(wink.isBoolean(b))f=b?"true":"false";else if(!wink.isUndefined(b)&&typeof b!="function"){if(wink.isArray(b))a:{f=[];for(var h=0;h<
c.length;h++)if(c[h]==b){b=void 0;break a}c.push(b);var e;for(h=0;h<b.length;h++){e=a(b[h]);f.push(wink.isUndefined(e)?"null":e)}if(f.length==0)b="[]";else{b="";for(h=0;h<f.length;h++)b+=f[h]+",";b=b.slice(0,-1);b="["+b+"]"}c.pop();b=b}else a:{e=[];f=[];for(h=0;h<c.length;h++)if(c[h]==b){b=void 0;break a}c.push(b);for(var g in b)e.push(g);for(h=0;h<e.length;h++){g=a(b[e[h]]);if(!wink.isUndefined(g)){g=d(e[h])+":"+g;f.push(g)}}if(f.length==0)str="{}";else{b="";for(h=0;h<f.length;h++)b+=f[h]+",";b=
b.slice(0,-1);str="{"+b+"}"}c.pop();b=str}f=b}return f},d=function(b){b=b.replace(/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,function(f){var h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};h[f]||(h[f]="\\u"+("0000"+(+f.charCodeAt(0)).toString(16)).slice(-4));return h[f]});return b='"'+b+'"'};return wink.json});
define(["../../../_amd/core"],function(c){c.ux.window={height:null,width:null,fullHeight:null,fullWidth:null,screenHeight:screen.height,screenWidth:screen.width,orientation:null,_i:null,_V:"vertical",_H:"horizontal",_init:function(){var a=c.bind(this._updateData,this);"onorientationchange"in window?window.addEventListener("orientationchange",a,true):window.addEventListener("resize",a,true);if(c.ua.isAndroid){scrollTo(0,1,0);this._i=setInterval(a,1E3)}else window.addEventListener("scroll",a,true);
a()},_updateData:function(){var a=window.innerWidth,d=window.innerHeight,b=false;if(this.width+2<a||this.width-2>a||this.height+2<d||this.height-2>d)b=true;this._updateSize();this._updateOrientation();b&&c.publish("/window/events/resize",{height:d,width:a,orientation:this.orientation})},_updateSize:function(){this.height=window.innerHeight;this.width=window.innerWidth;try{this.fullHeight=document.body.scrollHeight;this.fullWidth=document.body.scrollWidth}catch(a){}},_updateOrientation:function(){var a;
a=c.isSet(window.orientation)&&c.ua.isIOS?Math.abs(window.orientation)==90?this._H:this._V:this.width>this.height?this._H:this._V;if(a!=this.orientation){this.orientation=a;c.publish("/window/events/orientationchange",{height:this.height,width:this.width,orientation:a})}}};window.addEventListener("DOMContentLoaded",function(){c.ux.window._init()},false);c.ux.Window=function(){this.getProperties=function(){return{screenWidth:c.ux.window.screenWidth,screenHeight:c.ux.window.screenHeight,width:c.ux.window.width,
height:c.ux.window.height,orientation:c.ux.window.orientation}}};return c.ux.window});
define(["../../../_amd/core"],function(c){c.math.radToDeg=function(a){return a*180/Math.PI};c.math.degToRad=function(a){return a*Math.PI/180};c.math.getAngle=function(a,d){var b=Math.abs(d);if(b>a*2)b=a*2;var f=2*a*a;b=Math.acos(-((Math.pow(b,2)-(Math.pow(a,2)+Math.pow(a,2)))/f));if(isNaN(b))b=0;return b};c.math.getAngleBetweenVectors=function(a,d){var b=c.math.getScalarVector(a,d),f=c.math.getNormVector(a)*c.math.getNormVector(d);b=Math.acos(b/f);if(isNaN(b))b=0;return b};c.math.normalizeVector=
function(a){var d=[0,0,0,1],b=c.math.getNormVector(a);if(b<=0)return d;d[0]=a[0]/b;d[1]=a[1]/b;d[2]=a[2]/b;return d};c.math.getNormVector=function(a){a=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];return a=Math.sqrt(a)};c.math.getNormalVector=function(a,d){var b=[0,0,0,1];b[0]=a[1]*d[2]-a[2]*d[1];b[1]=a[2]*d[0]-a[0]*d[2];b[2]=a[0]*d[1]-a[1]*d[0];return b};c.math.getScalarVector=function(a,d){var b=0;return b=a[0]*d[0]+a[1]*d[1]+a[2]*d[2]};c.math.getVector=function(a,d){var b=[0,0,0,1];b[0]=d[0]-a[0];b[1]=d[1]-a[1];
b[2]=d[2]-a[2];return b};c.math.multiplyMatrixVector=function(a,d){var b=[0,0,0,1];d[3]||(d[3]=1);b[0]=d[0]*a[0]+d[1]*a[1]+d[2]*a[2]+d[3]*a[3];b[1]=d[0]*a[4]+d[1]*a[5]+d[2]*a[6]+d[3]*a[7];b[2]=d[0]*a[8]+d[1]*a[9]+d[2]*a[10]+d[3]*a[11];b[3]=d[0]*a[12]+d[1]*a[13]+d[2]*a[14]+d[3]*a[15];return b};return c.math});
define(["../../../_amd/core"],function(c){c.math.createTransformMatrix=function(a){var d=new c.math.Matrix({});c.isSet(a)&&d.loadCssTransform(a);return d};c.math.Matrix=function(a){this.uId=c.getUId();this._properties=a;this._values=[];this._cssMatrix=null;this._matrixConversionBug=c.ua.isBlackBerry&&c.ua.browserVersion==7&&c.ua.browserMinorVersion==1;this._validateProperties()!==false&&this._initProperties()};c.math.Matrix.prototype={scale:function(a,d,b){this._load(this._cssMatrixToValues(this._cssMatrix.scale(a,
d,b)))},translate:function(a,d,b){this._load(this._cssMatrixToValues(this._cssMatrix.translate(a,d,b)))},rotateAxisAngle:function(a,d,b,f){this._load(this._cssMatrixToValues(this._cssMatrix.rotateAxisAngle(a,d,b,f)))},multiply:function(a){a=a.getCssMatrix();var d=this._cssMatrix;if(c.has("css-matrix-stack-inversed")){var b=a;a=d;d=b}this._load(this._cssMatrixToValues(a.multiply(d)))},clone:function(){return new c.math.Matrix({values:this._values})},loadCssTransform:function(a){if(isString(a)){if(a.indexOf("matrix3d")!=
-1){a=a.substring(9,a.length-1).split(", ");for(var d=[],b=0;b<a.length;b++)d[b]=a[b]*1;this._load(d)}}else try{this._load(this._cssMatrixToValues(a))}catch(f){}},getValues:function(){return this._values},getCssMatrix:function(){return this._cssMatrix},toString:function(){return this._matrixConversionBug?"matrix3d("+this._values.join(",")+")":this._cssMatrix.toString()},_validateProperties:function(){return true},_initProperties:function(){c.isSet(this._properties.values)?this._load(this._properties.values):
this._loadIdentity()},_loadIdentity:function(){this._load([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},_load:function(a){if(!c.isSet(a)||a.length!=16)return false;this._values=a;this._cssMatrix=this._valuesToCssMatrix(this._values)},_valuesToCssMatrix:function(a){var d=new WebKitCSSMatrix;d.m11=a[0];d.m12=a[1];d.m13=a[2];d.m14=a[3];d.m21=a[4];d.m22=a[5];d.m23=a[6];d.m24=a[7];d.m31=a[8];d.m32=a[9];d.m33=a[10];d.m34=a[11];d.m41=a[12];d.m42=a[13];d.m43=a[14];d.m44=a[15];return d},_cssMatrixToValues:function(a){var d=
[];d[0]=a.m11;d[1]=a.m12;d[2]=a.m13;d[3]=a.m14;d[4]=a.m21;d[5]=a.m22;d[6]=a.m23;d[7]=a.m24;d[8]=a.m31;d[9]=a.m32;d[10]=a.m33;d[11]=a.m34;d[12]=a.m41;d[13]=a.m42;d[14]=a.m43;d[15]=a.m44;return d}};return c.math});
define(["../../../_amd/core","../../../math/_matrix/js/matrix"],function(c){var a=[];c.fx.set3dTransform=function(f,h,e){if(!d(h))return false;var g;if(e===true)g=c.fx.getTransform(f);e=c.math.createTransformMatrix(g);h=b(h);e.multiply(h);c.fx.setTransform(f,e.toString())};c.fx.initComposedTransform=function(f,h){var e;if(h===true)e=c.fx.getTransform(f);e=c.math.createTransformMatrix(e);c.fx.removeComposedTransform(f);a.push({node:f,transforms:[e]})};c.fx.setTransformPart=function(f,h,e){if(!d(e))return false;
if(h<1||h>10)return false;var g,j=a.length;for(g=0;g<j;g++){var k=a[g];if(k.node==f){f=null;if(c.isSet(e))f=b(e);k.transforms[h]=f;break}}};c.fx.applyComposedTransform=function(f,h){var e,g=a.length;for(e=0;e<g;e++){var j=a[e];if(j.node==f){e=j.transforms;g=e[0].clone();var k,o=e.length;for(k=1;k<o;k++){var r=e[k];c.isSet(r)&&g.multiply(r)}if(h===true)j.transforms=[g];c.fx.setTransform(f,g.toString());break}}};c.fx.storeComposedTransform=function(f){c.fx.applyComposedTransform(f,true)};c.fx.removeComposedTransform=
function(f){var h,e=a.length;for(h=0;h<e;h++)if(a[h].node==f){a.splice(h,1);break}};var d=function(f){var h=true,e=c.isSet;if(e(f)){var g=["translate","scale","rotate"];if((h=(h=(h=(h=(h=h&&e(f.type))&&g.indexOf(f.type)!=-1)&&e(f.x))&&e(f.y))&&e(f.z))&&f.type=="rotate")h=h&&e(f.angle)}return h},b=function(f){var h=c.math.createTransformMatrix();switch(f.type){case "translate":h.translate(f.x,f.y,f.z);break;case "scale":h.scale(f.x,f.y,f.z);break;case "rotate":h.rotateAxisAngle(f.x,f.y,f.z,f.angle);
break}return h};return c.fx});
define(["../../../../_amd/core","../../../../math/_geometric/js/geometric"],function(c){c.ui.xy.CSpinner=function(e){this.uId=c.getUId();this._domNode=null;c.mixin(this,e);if(this._validateProperties()!==false){this._initProperties();this._initDom()}};c.ui.xy.CSpinner.prototype={getDomNode:function(){return this._domNode},toggle:function(){this._timer?this._stopRendering():this._startRendering()},_startRendering:function(){if(!this._timer)this._timer=c.setInterval(this,"_render",this.refreshRate)},
_stopRendering:function(){clearInterval(this._timer);this._timer=null},_render:function(){this._ctx.clearRect(0,0,this.size,this.size);var e=this._ctx,g=this._cx,j=this._cy,k=this._r1,o=this._r2,r=this.count,m=this.space,l=this.linewidth,n=this._grdcolors,p=this.linecolor,q,s,t=(360-m*r)/r,v=0;q=0;for(s=r-this._position-1;q<r;q++){s=(s+1)%r;var w=e,u=g,z=j,B=k,D=o,x=v,y=v+t,E=l,C=n[s],F=p;w.beginPath();var A=b(u,z,B,x);w.moveTo(A.x,A.y);A=void 0;A=y>x?false:true;w.arc(u,z,B,d(x-90),d(y-90),A);A=b(u,
z,D,y);w.lineTo(A.x,A.y);A=void 0;A=x>y?false:true;w.arc(u,z,D,d(y-90),d(x-90),A);A=b(u,z,B,x);w.lineTo(A.x,A.y);w.closePath();b(u,z,B,x+Math.abs(y-x)/2);b(u,z,D,x+Math.abs(y-x)/2);w.fillStyle=C;w.fill();if(E>0){w.lineWidth=E;w.strokeStyle=F||"transparent";w.stroke()}v+=t+m}this._position=(this._position+1)%this.count},_validateProperties:function(){return true},_initDom:function(){var e=this._domNode=document.createElement("canvas");c.fx.translate(e,0,0);this._ctx=e.getContext("2d");e.width=this.size;
e.height=this.size;this._render();this._startRendering()},_initProperties:function(){var e=this,g=function(j,k){if(e[j]!==0)e[j]=e[j]||k};g("size",25);g("fromcolor","#ccc");g("tocolor","#000");g("stopcolor",0.4);g("linecolor",null);g("radius",7);g("thickness",5);g("count",Math.floor(e.radius*1.5));g("space",10);g("linewidth",1);g("refreshRate",40);e._cx=e.size/2;e._cy=e.size/2;e._r1=e.radius;e._r2=e._r1+e.thickness;e._timer=null;e._grdcolors=f(e.fromcolor,e.tocolor,e.stopcolor,e.count);e._position=
0}};var a=c.math.round,d=c.math.degToRad,b=function(e,g,j,k){return{x:e+j*Math.cos(d(k-90)),y:g+j*Math.sin(d(k-90))}},f=function(e,g,j,k){e=h(e)||{r:0,g:0,b:0,a:1};g=h(g)||{r:255,g:255,b:255,a:1};var o=[],r,m,l=1,n=1/k,p=0;for(m=r=0;r<k;r++,m+=n){var q={r:e.r*l+(1-l)*g.r,g:e.g*l+(1-l)*g.g,b:e.b*l+(1-l)*g.b,a:e.a*l+(1-l)*g.a};o.push("rgba("+a(q.r,0)+","+a(q.g,0)+","+a(q.b,0)+","+a(q.a,2)+")");if(p==0&&m>=j)p=1/(k-r);l-=p;if(r==k-2)l=0}return o},h=function(e){var g=null,j=null;if(!g)if(g=/^#?([a-fA-F0-9]{1,2})([a-fA-F0-9]{1,2})([a-fA-F0-9]{1,2})$/.exec(e)){for(j=
1;j<4;j++)g[j]=g[j].length==1?g[j]+g[j]:g[j];j={r:parseInt(g[1],16),g:parseInt(g[2],16),b:parseInt(g[3],16),a:1}}if(!g)if(g=/[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)[^0-9]*([0-9\.]+)?/.exec(e))j={r:g[1],g:g[2],b:g[3],a:g[4]||1};return j};return c.ui.xy.CSpinner});
define(["../../../_amd/core"],function(c){c.ux.MovementTracker=function(a){this.uId=c.getUId();this._properties=a;this._previousPoint=this._startPoint=this._pointStatement=this._target=null;this._tracking=false;this._acceptEvents=true;this._multitouch=false;this._params={captureFlow:true,preventStart:true,preventMove:false,shiftThreshold:0,trackThresholdX:0,trackThresholdY:0};if(this._validateProperties()!==false){this._initProperties();this._initListeners()}};c.ux.MovementTracker.prototype={updateTrackThresholdX:function(a){if(this._isValidThreshold(a))this._params.trackThresholdX=
a;else this._raisePropertyError("trackThresholdX")},updateTrackThresholdY:function(a){if(this._isValidThreshold(a))this._params.trackThresholdY=a;else this._raisePropertyError("trackThresholdY")},destroy:function(){this._removeListeners()},_validateProperties:function(){return true},_isValidThreshold:function(a){return c.isInteger(a)&&a>=0},_raisePropertyError:function(a){c.log("[MovementTracker] Error: "+a+" missing or invalid")},_initProperties:function(){this._target=c.byId(this._properties.target);
if(this._properties.captureFlow===false)this._params.captureFlow=false;if(this._properties.preventStart===false)this._params.preventStart=false;if(this._properties.preventMove===true)this._params.preventMove=true;if(c.isSet(this._properties.trackThresholdX))this._params.trackThresholdX=this._properties.trackThresholdX;if(c.isSet(this._properties.trackThresholdY))this._params.trackThresholdY=this._properties.trackThresholdY;delete this._properties},_initListeners:function(){c.ux.touch.addListener(this._target,
"start",{context:this,method:"_handleTouchStart"},{preventDefault:this._params.preventStart,captureFlow:this._params.captureFlow});c.ux.touch.addListener(this._target,"move",{context:this,method:"_handleTouchMove"},{preventDefault:this._params.preventMove,captureFlow:this._params.captureFlow});c.ux.touch.addListener(this._target,"end",{context:this,method:"_handleTouchEnd"},{captureFlow:this._params.captureFlow})},_removeListeners:function(){c.ux.touch.removeListener(this._target,"start",{context:this,
method:"_handleTouchStart"});c.ux.touch.removeListener(this._target,"move",{context:this,method:"_handleTouchMove"});c.ux.touch.removeListener(this._target,"end",{context:this,method:"_handleTouchEnd"})},_handleTouchStart:function(a){if(c.ua.isAndroid)if(!this.defered){this.defered=true;if((new Date).getTime()-a.timestamp>100){this._acceptEvents=false;a.preventDefault();var d,b={exec:c.bind(function(){clearTimeout(d);this._acceptEvents=true;this._handleTouchStart(a)},this)};d=c.setTimeout(b,"exec",
0);return}}if(this._acceptEvents!=false){this._multitouch=false;if(a.multitouch==true)this._multitouch=true;else{this._acceptEvents=false;this._pointStatement=[];this._previousPoint=null;this._tracking=false;this._startPoint={x:a.x,y:a.y};b=this._onNewTouch(a);c.publish(b.name,b.params);this._acceptEvents=true}}},_handleTouchMove:function(a){if(this._acceptEvents!=false)if(!this._multitouch){this._acceptEvents=false;a=this._onNewTouch(a);c.publish(a.name,a.params);this._acceptEvents=true}},_handleTouchEnd:function(a){if(this._acceptEvents!=
false)if(!this._multitouch){this._acceptEvents=false;a=this._onNewTouch(a);c.publish(a.name,a.params);this._acceptEvents=true}},_onNewTouch:function(a){if(this._tracking==false)if(this._params.trackThresholdX==0||this._params.trackThresholdY==0)this._tracking=true;else{var d={x:a.x,y:a.y},b=Math.abs(d.x-this._startPoint.x);d=Math.abs(d.y-this._startPoint.y);if(b>this._params.trackThresholdX||d>this._params.trackThresholdY)this._tracking=true}b={name:"/movementtracker/events/notrack",params:{publisher:this,
uxEvent:a,target:this._target}};if(this._tracking==false)return b;if(this._pointStatement.length==0)b.name="/movementtracker/events/mvtbegin";else if(a.type=="move")b.name="/movementtracker/events/mvtchanged";else if(a.type=="end")b.name="/movementtracker/events/mvtstored";this._addTouch(a);b.params.movement=this._getCurrentMovement();return b},_addTouch:function(a){a={x:a.x,y:a.y,timestamp:a.timestamp};var d=0,b=0,f=0,h=0,e=0,g=0;if(this._previousPoint==null){a.duration=0;a.globalDuration=0;d=a.x;
b=a.y}else{d=this._previousPoint.x;b=this._previousPoint.y;f=this._previousPoint.globalDx;h=this._previousPoint.globalDy;e=this._previousPoint.directionX;g=this._previousPoint.directionY;a.duration=a.timestamp-this._previousPoint.timestamp;a.globalDuration=a.duration+this._previousPoint.globalDuration}a.dx=Math.abs(a.x-d);a.dy=Math.abs(a.y-b);a.globalDx=a.dx+f;a.globalDy=a.dy+h;a.directionX=e;a.directionY=g;if(e==0&&this._previousPoint!=null){if(a.x<d)a.directionX=-1;else if(a.x>d)a.directionX=1;
this._previousPoint.directionX=a.directionX}if(g==0&&this._previousPoint!=null){if(a.y<b)a.directionY=-1;else if(a.y>b)a.directionY=1;this._previousPoint.directionY=a.directionY}if(e>0&&a.x+this._params.shiftThreshold<d)a.directionX=-1;else if(e<0&&a.x-this._params.shiftThreshold>d)a.directionX=1;if(g>0&&a.y+this._params.shiftThreshold<b)a.directionY=-1;else if(g<0&&a.y-this._params.shiftThreshold>b)a.directionY=1;this._pointStatement.push(a);this._previousPoint=a},_getCurrentMovement:function(){var a=
this._pointStatement[this._pointStatement.length-1];return{pointStatement:this._pointStatement,duration:a.globalDuration,dx:a.globalDx,dy:a.globalDy}}};return c.ux.MovementTracker});
define(["../../../_amd/core","../../movementtracker/js/movementtracker"],function(c){c.ux.Inertia=function(a){this.uId=c.getUId();this._properties=a;this._movementtracker=null;if(this._validateProperties()!==false){this._initProperties();this._initListeners()}};c.ux.Inertia.prototype={_DIRECTION_X:"x",_DIRECTION_Y:"y",_INTERRUPTION_THRESHOLD:150,_EVENT_INERTIA_COMPUTED:"/inertia/events/inertiacomputed",destroy:function(){this._removeListeners()},_validateProperties:function(){return true},_initProperties:function(){this._movementtracker=
this._properties.movementtracker;delete this._properties},_initListeners:function(){c.subscribe("/movementtracker/events/mvtstored",{context:this,method:"_computeInertia"})},_removeListeners:function(){c.unsubscribe("/movementtracker/events/mvtstored",{context:this,method:"_computeInertia"})},_computeInertia:function(a){if(a.publisher.uId==this._movementtracker.uId){var d=a.movement,b={pointStatement:d.pointStatement},f=this._getSignificantMovement(d,this._DIRECTION_X);d=this._getSignificantMovement(d,
this._DIRECTION_Y);var h=f.pointStatement[0],e=d.pointStatement[0],g=f.pointStatement[f.pointStatement.length-1],j=d.pointStatement[d.pointStatement.length-1];b.dx=Math.abs(g.x-h.x);b.dy=Math.abs(j.y-e.y);b.dtx=g.globalDuration-h.globalDuration;if(b.dtx==0)b.dtx=1;b.dty=j.globalDuration-e.globalDuration;if(b.dty==0)b.dty=1;b.directionX=f.direction;b.directionY=d.direction;b.speedX=b.dx/b.dtx;b.speedY=b.dy/b.dty;c.publish(this._EVENT_INERTIA_COMPUTED,{publisher:this,movement:b,uxEvent:a.uxEvent,target:a.target})}},
_getSignificantMovement:function(a,d){var b=this._extractDirectedMovement(a,d);b=this._extractInterruptedMovement(b[b.length-1]);return b[b.length-1]},_extractDirectedMovement:function(a,d){var b=[],f=a.pointStatement,h=0,e=f[0].directionX;if(d==this._DIRECTION_Y)e=f[0].directionY;for(var g=0;g<f.length;g++){var j=f[g],k=j.directionX;if(d==this._DIRECTION_Y)k=j.directionY;if(e!=k||g==f.length-1){j=g;if(g==f.length-1)j=f.length;h={pointStatement:f.slice(h,j),direction:e};b.push(h);h=g;e=k}}return b},
_extractInterruptedMovement:function(a){for(var d=[],b=a.pointStatement,f=0,h=0,e=0;e<b.length;e++){h+=b[e].duration;var g=e;if(h>this._INTERRUPTION_THRESHOLD||e==b.length-1){if(e==b.length-1&&h<=this._INTERRUPTION_THRESHOLD)g=b.length;h=0;var j=b.slice(f,g);j={pointStatement:j,direction:a.direction};d.push(j);f=e;if(e==b.length-1&&h>this._INTERRUPTION_THRESHOLD){j=b.slice(g,g+1);j={pointStatement:j,direction:a.direction};d.push(j)}}}return d}};return c.ux.Inertia});
define(["../../../../_amd/core","../../../../ux/inertia/js/inertia"],function(c){c.ui.layout.Scroller=function(a){this.uId=c.getUId();this._direction=this._target=null;this._captureFlow=true;this._view={x:0,y:0,viewportSizeX:0,viewportSizeY:0,sizeX:0,sizeY:0,limitX:0,limitY:0,shiftOriginY:0,shiftLimitY:0,scrollbars:{x:null,y:null,active:true,width:null,backgroundColor:null,borderColor:null,opacityTransition:null},autoRefreshOptions:{active:false,checkDelay:1E3,handler:null},timerSize:null};this._scroll=
{canScrollX:false,canScrollY:false,mustScrollX:false,mustScrollY:false,friction:14,acceleration:-0.00126,minSpeed:0.05};this._transition={duration:0,delay:0,func:"cubic-bezier(0.1, 0.2, 0.5, 1)",endHandler:null};this._callbacks={scrollerTouched:null,scrollerClicked:null,startScrolling:null,scrolling:null,endScrolling:null,startSliding:null,stopSliding:null};this._inertia=this._movementtracker=null;this._activated=true;this._animated=this._moveOutside=false;this._selectionEvent=null;this._updateContext(a)};
c.ui.layout.Scroller.prototype={_DIRECTION_X:"x",_DIRECTION_Y:"y",_DIRECTION_XY:"xy",updateTargetSize:function(a,d,b){if(this._view.timerSize==null)if(b===true&&this._view.timerSize==null){this._refreshTargetSize(a,d,false);this._view.timerSize=c.setTimeout(this,"_refreshTargetSize",this._view.autoRefreshOptions.checkDelay,a,d,b)}else this._refreshTargetSize(a,d,b)},updateViewportSize:function(a,d){var b=this._target.parentNode.clientWidth,f=this._target.parentNode.clientHeight;if(c.isSet(a))b=a;
if(c.isSet(d))f=d;if(this._view.viewportSizeX!=b||this._view.viewportSizeY!=f){this._setViewportSize(b,f);this._refreshView()}},updateShiftBounds:function(a,d){var b=false;if(a!=this._view.shiftOriginY){this._view.shiftOriginY=a;if(this._view.y==0)this._view.y=a;b=true}if(d!=this._view.shiftLimitY){this._view.shiftLimitY=d;b=true}if(b){this._refreshView();this._backToBounds()}},autoRefresh:function(a){if(c.isSet(a.checkDelay)&&a.checkDelay>=0)this._view.autoRefreshOptions.checkDelay=a.checkDelay;
if(c.isSet(a.active)&&this._view.autoRefreshOptions.active!==a.active){this._view.autoRefreshOptions.active=a.active;this._listenToContentChanges(a.active)}},scrollTo:function(a,d,b){this._slideTo(a,d,{duration:b})},backToBounds:function(){this._backToBounds()},getPosition:function(){return{x:this._view.x,y:this._view.y}},getViewProperties:function(){return this._view},enable:function(){this._activated=true},disable:function(){this._activated=false},destroy:function(){this._removeListeners();this._movementtracker.destroy();
delete this._movementtracker;this._inertia.destroy();delete this._inertia;this._removeScrollbars(true,true);for(var a in this._callbacks)this._callbacks[a]=null;if(this._view.timerSize!=null){clearTimeout(this._view.timerSize);this._view.timerSize=null}c.fx.apply(this._target,{"user-select":""});c.fx.applyTransition(this._target,"","","","");c.fx.setTransform(this._target,"");this._target=null},changeContext:function(a){this.destroy();this._updateContext(a)},_setTargetSize:function(a,d){this._view.sizeX=
a;this._view.sizeY=d},_setViewportSize:function(a,d){this._view.viewportSizeX=a;this._view.viewportSizeY=d},_updateContext:function(a){this._properties=a;if(this._validateProperties()!==false){this._initProperties();this._initListeners();this._slideTo(0,0);this._refreshView()}},_validateProperties:function(){return true},_raisePropertyError:function(a){c.log("[Scroller] Error: "+a+" missing or invalid")},_initProperties:function(){this._target=c.byId(this._properties.target);c.fx.apply(this._target,
{"user-select":"none"});if(c.isSet(this._properties.shiftOriginY))this._view.shiftOriginY=this._properties.shiftOriginY;if(c.isSet(this._properties.shiftLimitY))this._view.shiftLimitY=this._properties.shiftLimitY;this._setTargetSize(this._target.offsetWidth,this._target.offsetHeight);this._setViewportSize(this._target.parentNode.clientWidth,this._target.parentNode.clientHeight);this._direction=this._properties.direction;if(this._direction==this._DIRECTION_X||this._direction==this._DIRECTION_XY)this._scroll.mustScrollX=
true;if(this._direction==this._DIRECTION_Y||this._direction==this._DIRECTION_XY)this._scroll.mustScrollY=true;if(this._properties.captureFlow===false)this._captureFlow=false;if(c.isSet(this._properties.callbacks))for(var a in this._callbacks){var d=this._properties.callbacks[a];if(c.isSet(d))this._callbacks[a]=d}if(c.isSet(this._properties.scrollbars))for(a in this._view.scrollbars){d=this._properties.scrollbars[a];if(c.isSet(d))this._view.scrollbars[a]=d}a=this._properties.friction;if(c.isSet(a)&&
c.isInteger(a)){this._scroll.friction=Math.max(Math.min(a,100),1);this._scroll.acceleration=Math.min(-9.0E-5*this._scroll.friction,-1.0E-4);this._scroll.minSpeed=Math.sqrt(Math.abs(this._scroll.acceleration*2))}delete this._properties},_initListeners:function(){this._movementtracker=new c.ux.MovementTracker({target:this._target,captureFlow:this._captureFlow,preventStart:false,preventMove:false,trackThresholdX:5,trackThresholdY:5});c.subscribe("/movementtracker/events/notrack",{context:this,method:"_handleTouchNotTracked"});
c.subscribe("/movementtracker/events/mvtbegin",{context:this,method:"_handleMovementBegin"});c.subscribe("/movementtracker/events/mvtchanged",{context:this,method:"_handleMovementChanged"});this._inertia=new c.ux.Inertia({movementtracker:this._movementtracker});c.subscribe("/inertia/events/inertiaComputed",{context:this,method:"_handleMovementStored"});this._transition.endHandler=c.fx.onTransitionEnd(this._target,c.bind(this._handleTransitionEnd,this),true)},_removeListeners:function(){c.unsubscribe("/movementtracker/events/notrack",
{context:this,method:"_handleTouchNotTracked"});c.unsubscribe("/movementtracker/events/mvtbegin",{context:this,method:"_handleMovementBegin"});c.unsubscribe("/movementtracker/events/mvtchanged",{context:this,method:"_handleMovementChanged"});c.unsubscribe("/inertia/events/inertiaComputed",{context:this,method:"_handleMovementStored"});this._target.removeEventListener(c.has.prop("transitionend"),this._transition.endHandler,false);this._transition.endHandler=null;this._listenToContentChanges(false)},
_listenToContentChanges:function(a){if(a){var d=this._view.autoRefreshOptions.checkDelay>0;this._view.autoRefreshOptions.handler=c.bind(function(){var b=this._target.offsetHeight;if(this._view.sizeX!=this._target.offsetWidth||this._view.sizeY!=b)this.updateTargetSize(null,null,d)},this);this._target.addEventListener("DOMSubtreeModified",this._view.autoRefreshOptions.handler,false)}else if(this._view.autoRefreshOptions.handler!=null){this._target.removeEventListener("DOMSubtreeModified",this._view.autoRefreshOptions.handler,
false);this._view.autoRefreshOptions.handler=null}},_refreshTargetSize:function(a,d,b){this._view.timerSize!=null&&clearTimeout(this._view.timerSize);var f=this._target.offsetWidth,h=this._target.offsetHeight;if(c.isSet(a))f=a;if(c.isSet(d))h=d;this._view.timerSize=null;if(this._view.sizeX!=f||this._view.sizeY!=h){this._setTargetSize(f,h);this._refreshView();if(b===true)this._view.timerSize=c.setTimeout(this,"_refreshTargetSize",this._view.autoRefreshOptions.checkDelay,a,d,b)}},_refreshView:function(){var a=
this._scroll.canScrollX,d=this._scroll.canScrollY;if(this._view.sizeX>this._view.viewportSizeX){this._view.limitX=this._view.viewportSizeX-this._view.sizeX;this._scroll.canScrollX=true}else{this._view.limitX=0;this._scroll.canScrollX=false}var b=this._view.sizeY-(this._view.shiftOriginY+this._view.shiftLimitY);if(b>this._view.viewportSizeY){this._view.limitY=this._view.viewportSizeY-b;this._scroll.canScrollY=true}else{this._view.limitY=0;this._scroll.canScrollY=false}this._scroll.canScrollX?this._movementtracker.updateTrackThresholdX(5):
this._movementtracker.updateTrackThresholdX(999);this._scroll.canScrollY?this._movementtracker.updateTrackThresholdY(5):this._movementtracker.updateTrackThresholdY(999);if(a!=this._scroll.canScrollX)if(this._view.x!=0){this._view.x=0;this._slideTo(null,null,{backToBound:true,duration:1})}if(d!=this._scroll.canScrollY)if(this._view.y!=0){this._view.y=0;this._slideTo(null,null,{backToBound:true,duration:1})}if(this._view.scrollbars.active==true){if(this._scroll.canScrollX&&this._scroll.mustScrollX){a=
this._view.scrollbars.x;if(a==null)a=this._view.scrollbars.x=new c.ui.layout.Scroller.Scrollbar({direction:"x",width:this._view.scrollbars.width,backgroundColor:this._view.scrollbars.backgroundColor,borderColor:this._view.scrollbars.borderColor,opacityTransition:this._view.scrollbars.opacityTransition});a.updateSize(this._view.viewportSizeX,this._view.sizeX);this._target.parentNode.appendChild(a.getDomNode())}else this._removeScrollbars(true,false);if(this._scroll.canScrollY&&this._scroll.mustScrollY){a=
this._view.scrollbars.y;if(a==null)a=this._view.scrollbars.y=new c.ui.layout.Scroller.Scrollbar({direction:"y",width:this._view.scrollbars.width,backgroundColor:this._view.scrollbars.backgroundColor,borderColor:this._view.scrollbars.borderColor,opacityTransition:this._view.scrollbars.opacityTransition});a.updateSize(this._view.viewportSizeY,b);this._target.parentNode.appendChild(a.getDomNode())}else this._removeScrollbars(false,true);b={timeout:null,hide:function(f){clearTimeout(this.timeout);f._hideScrollbars()}};
b.timeout=c.setTimeout(b,"hide",1E3,this)}},_removeScrollbars:function(a,d){if(a==true&&this._view.scrollbars.x!=null){this._target.parentNode.removeChild(this._view.scrollbars.x.getDomNode());this._view.scrollbars.x=null}if(d==true&&this._view.scrollbars.y!=null){this._target.parentNode.removeChild(this._view.scrollbars.y.getDomNode());this._view.scrollbars.y=null}},_handleTouchNotTracked:function(a){if(a.publisher.uId==this._movementtracker.uId){a=a.uxEvent;a.type=="start"&&c.isSet(this._callbacks.scrollerTouched)&&
c.call(this._callbacks.scrollerTouched,{uxEvent:a});if(this._activated!=false){a.preventDefault();a.stopPropagation();if(a.type=="start"){this._selectionEvent=null;if(this._animated==false)this._selectionEvent=a;a=this._getInstantPosition();if(!this._isAtPosition(a.x,a.y)){c.isSet(this._callbacks.stopSliding)&&c.call(this._callbacks.stopSliding,{});this._slideTo(a.x,a.y)}}else if(a.type=="end"){this._backToBounds();this._hideScrollbars();if(c.isSet(this._selectionEvent)){var d=0;if(!this._scroll.canScrollX&&
!this._scroll.canScrollY){var b=this._selectionEvent;d=a.x-b.x;b=a.y-b.y;d=Math.sqrt(d*d+b*b)}if(d<5){c.isSet(this._callbacks.scrollerClicked)&&c.call(this._callbacks.scrollerClicked,{uxEvent:a});this._handleSelection(a)}}}}}},_handleMovementBegin:function(a){if(a.publisher.uId==this._movementtracker.uId)if(this._activated!=false){a=a.uxEvent;a.preventDefault();a.stopPropagation();c.isSet(this._callbacks.startScrolling)&&c.call(this._callbacks.startScrolling,{uxEvent:a});c.isSet(this._view.autoRefreshOptions.handler)&&
this._view.autoRefreshOptions.handler()}},_handleSelection:function(a){var d=this._getProperEventTarget(a),b=d.tagName,f=d.type,h,e;if(c.isSet(b)){h=b.toLowerCase();e=(b=h=="input"&&f?f.toLowerCase()=="text":false)||h=="textarea"}if(e||h=="select")d.focus();c.has("touch")&&a.dispatch(d,"click")},_getProperEventTarget:function(a){var d=a.target;if(a.target.nodeType==3)d=d.parentNode;return d},_handleMovementChanged:function(a){if(a.publisher.uId==this._movementtracker.uId)if(this._activated!=false){a.uxEvent.stopPropagation();
var d=a.movement,b=d.pointStatement[d.pointStatement.length-2];d=d.pointStatement[d.pointStatement.length-1];var f=d.x-b.x;b=d.y-b.y;var h=this._view.y;if(h>0)h-=this._view.shiftOriginY;else if(h<this._view.limitY)h+=this._view.shiftLimitY;this._moveOutside=false;h=this._getBoundsInfos(this._view.x,h);if(h.outsideOfBoundsX)if(h.directionX>0&&d.directionX>0||h.directionX<0&&d.directionX<0){f/=3;this._moveOutside=true}if(h.outsideOfBoundsY)if(h.directionY>0&&d.directionY>0||h.directionY<0&&d.directionY<
0){b/=3;this._moveOutside=true}d=this._view.x+c.math.round(f,0);f=this._view.y+c.math.round(b,0);this._slideTo(d,f);c.isSet(this._callbacks.scrolling)&&c.call(this._callbacks.scrolling,{uxEvent:a.uxEvent})}},_handleMovementStored:function(a){if(a.publisher.uId==this._inertia.uId)if(this._activated!=false){c.isSet(this._callbacks.endScrolling)&&c.call(this._callbacks.endScrolling,{uxEvent:a.uxEvent});a=a.movement;this._interpretInertia(a);if(!this._moveOutside&&!this._isAtPosition(a.destX,a.destY))this._slideTo(a.destX,
a.destY,{duration:a.duration,speed:a.speed});else{this._backToBounds();this._hideScrollbars()}}},_interpretInertia:function(a){var d=this._scroll.canScrollX&&this._scroll.mustScrollX,b=this._scroll.canScrollY&&this._scroll.mustScrollY,f=c.math.round(this._view.viewportSizeX/3,1),h=c.math.round(this._view.viewportSizeY/3,1),e=this._scroll.acceleration,g=this._scroll.minSpeed,j=a.speedX,k=a.speedY;j=j<g?0:j;k=k<g?0:k;g=-(j*j)/(2*e);var o=-(k*k)/(2*e),r=-j/e;e=-k/e;d||(g=r=0);b||(o=e=0);var m=this._getBoundsInfos(this._view.x+
g*a.directionX,this._view.y+o*a.directionY);if(m.outsideOfBoundsX&&m.distanceToBoundX>f){f=m.distanceToBoundX-f;var l=f/g;g-=f;r-=l*r}if(m.outsideOfBoundsY&&m.distanceToBoundY>h){f=m.distanceToBoundY-h;l=f/o;o-=f;e-=l*e}a.destX=this._view.x+c.math.round(g*a.directionX,0);a.destY=this._view.y+c.math.round(o*a.directionY,0);r=Math.max(c.math.round(r,0),1);e=Math.max(c.math.round(e,0),1);a.duration=e;a.speed=c.math.round(k,3);if(d&&!b||d&&b&&r>e){a.duration=r;a.speed=c.math.round(j,3)}},_handleTransitionEnd:function(){if(this._animated==
true){this._animated=false;c.isSet(this._callbacks.stopSliding)&&c.call(this._callbacks.stopSliding,{});var a=0;if(this._backToBounds())a=350;this._hideScrollbars(a)}},_backToBounds:function(){var a=this._getBoundsInfos(this._view.x,this._view.y);if(a.outsideOfBounds){var d=this._view.x,b=this._view.y;if(a.outsideOfBoundsX)d=a.positionOfBoundX;if(a.outsideOfBoundsY)b=a.positionOfBoundY;this._slideTo(d,b,{backToBound:true});return true}return false},_getBoundsInfos:function(a,d){var b={outsideOfBoundsX:false,
outsideOfBoundsY:false,distanceToBoundX:0,distanceToBoundY:0};if(a>0||a<this._view.limitX){b.outsideOfBoundsX=true;if(a>0){b.distanceToBoundX=Math.abs(a);b.directionX=1;b.positionOfBoundX=0}else{b.distanceToBoundX=Math.abs(a-this._view.limitX);b.directionX=-1;b.positionOfBoundX=this._view.limitX}}if(d>0||d<this._view.limitY){b.outsideOfBoundsY=true;if(d>0){b.distanceToBoundY=Math.abs(d);b.directionY=1;b.positionOfBoundY=0}else{b.distanceToBoundY=Math.abs(d-this._view.limitY);b.directionY=-1;b.positionOfBoundY=
this._view.limitY}}b.outsideOfBounds=b.outsideOfBoundsX||b.outsideOfBoundsY;return b},_isAtPosition:function(a,d){if(this._view.x==a&&this._view.y==d)return true;return false},_slideTo:function(a,d,b){var f=b&&b.duration?b.duration:0,h=b&&b.speed?b.speed:0;b=b&&b.backToBound?b.backToBound:false;this._transition.duration=f;if(f>=1){this._animated=true;c.isSet(this._callbacks.startSliding)&&c.call(this._callbacks.startSliding,{duration:f,speed:h})}else this._animated=false;f=f+"ms";h=this._transition.delay+
"ms";var e=this._transition.func;if(b){f="350ms";e="cubic-bezier(0.3, 0.1, 1.0, 0.5)"}c.fx.applyTransformTransition(this._target,f,h,e);if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.applyTransition(f,h,e);this._view.scrollbars.y!=null&&this._view.scrollbars.y.applyTransition(f,h,e)}this._translateTo(a,d)},_getInstantPosition:function(){var a=c.fx.getTransformPosition(this._target);a.y+=this._view.shiftOriginY;return a},_translateTo:function(a,d){var b=
this._view.x,f=this._view.y;if(c.isSet(a)&&this._scroll.canScrollX&&this._scroll.mustScrollX)b=a;if(c.isSet(d)&&this._scroll.canScrollY&&this._scroll.mustScrollY)f=d;this._view.x=parseInt(b);this._view.y=parseInt(f);c.fx.translate(this._target,this._view.x,this._view.y-this._view.shiftOriginY);if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.updatePosition(this._view.x,this._view.y);this._view.scrollbars.y!=null&&this._view.scrollbars.y.updatePosition(this._view.x,
this._view.y)}},_hideScrollbars:function(a){if(this._view.scrollbars.active==true){this._view.scrollbars.x!=null&&this._view.scrollbars.x.hide(a);this._view.scrollbars.y!=null&&this._view.scrollbars.y.hide(a)}}};c.ui.layout.Scroller.Scrollbar=function(a){this.uId=c.getUId();this._properties=a;this._direction=null;this._backgroundColor="rgba(0, 0, 0, 0.55)";this._borderColor="rgba(0, 0, 0, 0.2)";this._opacityTransition=true;this._view={x:0,y:0,viewportSize:0,contentSize:0,size:0,width:0,ratioSize:0,
ratioPosition:0,ratioBounce:0,borderSize:1,availableSpace:0,showed:true};this._transition={duration:"",delay:"",func:""};this._ctx=this._canvasNode=this._domNode=null;this._firstHide=true;if(this._validateProperties()!==false){this._initProperties();this._initDom()}};c.ui.layout.Scroller.Scrollbar.prototype={_DEFAULT_WIDTH:5,getDomNode:function(){return this._domNode},updateSize:function(a,d){var b=0,f=0;this._view.viewportSize=a-this._view.borderSize*2;this._view.contentSize=d;if(a<d){this._view.ratioSize=
this._view.viewportSize/this._view.contentSize;this._view.ratioSize*=0.11*(this._view.contentSize/this._view.viewportSize)+0.89}else this._view.ratioSize=1;b=f=this._view.ratioSize*this._view.viewportSize;if(this._direction=="y")b=this._view.width;else f=this._view.width;this._resize(b,f);this._view.availableSpace=this._view.viewportSize-this._view.size;this._view.ratioPosition=this._view.availableSpace/(this._view.contentSize-this._view.viewportSize);this._view.ratioBounce=0.0010*this._view.contentSize+
3},updatePosition:function(a,d){this._view.showed==false&&this.show();var b=0,f=0,h=this._view.availableSpace;if(this._direction=="y"){f=-d*this._view.ratioPosition;if(f<0||f>h)f=f<0?Math.max(f+f*this._view.ratioBounce,-this._view.size+5):Math.min(f+(f-h)*this._view.ratioBounce,this._view.viewportSize-5)}else{b=-a*this._view.ratioPosition;if(b<0||b>h)b=b<0?Math.max(b+b*this._view.ratioBounce,-this._view.size+5):Math.min(b+(b-h)*this._view.ratioBounce,this._view.viewportSize-5)}this._translateTo(b,
f)},show:function(){if(this._view.showed!=true){this._view.showed=true;c.fx.applyTransition(this._canvasNode,"opacity","0ms","0ms","default");this._canvasNode.style.opacity=1}},hide:function(a){if(this._view.showed!=false){this._view.showed=false;if(this._opacityTransition==true){var d=300;if(c.isSet(a))d+=a;if(this._firstHide){this._firstHide=false;d+=600}d+="ms";c.fx.applyTransition(this._canvasNode,"opacity","200ms",d,"default")}this._canvasNode.style.opacity=0}},applyTransition:function(a,d,b){var f=
false;if(f=(f=(f=f||a!=this._transition.duration)||d!=this._transition.delay)||b!=this._transition.func){this._transition.duration=a;this._transition.delay=d;this._transition.func=b;c.fx.applyTransformTransition(this._domNode,a,d,b)}},_validateProperties:function(){return true},_raisePropertyError:function(a){c.log("[Scrollbar] Error: "+a+" missing or invalid")},_initProperties:function(){this._direction=this._properties.direction;this._view.width=this._DEFAULT_WIDTH;if(c.isSet(this._properties.width))this._view.width=
this._properties.width;if(c.isSet(this._properties.borderColor))this._borderColor=this._properties.borderColor;if(c.isSet(this._properties.backgroundColor))this._backgroundColor=this._properties.backgroundColor;if(c.isSet(this._properties.opacityTransition))this._opacityTransition=this._properties.opacityTransition},_initDom:function(){var a=this._domNode=document.createElement("div"),d=this._canvasNode=document.createElement("canvas");this._ctx=d.getContext("2d");a.appendChild(d);var b={position:"absolute",
"pointer-events":"none",opacity:1};if(this._direction=="y"){b.top="0px";b.right="1px"}else{b.bottom="2px";b.left="0px"}c.fx.apply(a,b);c.fx.apply(d,{position:"absolute"});c.fx.translate(d,0,0)},_drawbar:function(){var a=this._direction=="y",d=this._ctx,b=a?this._view.width/2:this._view.width/2+1,f=a?this._view.width/2+1:this._view.width/2,h=a?this._view.width:this._view.size-1,e=a?this._view.size-1:this._view.width,g=a?h/2:e/2;d.fillStyle=this._backgroundColor;d.strokeStyle=this._borderColor;d.lineWidth=
this._view.borderSize;d.beginPath();if(a){d.arc(b,f,g,Math.PI,0,false);d.lineTo(b+g,e-g);d.arc(b,e-g,g,0,Math.PI,false);d.lineTo(b-g,f)}else{d.arc(b,f,g,Math.PI/2,3*Math.PI/2,false);d.lineTo(h-g,f-g);d.arc(h-g,f,g,3*Math.PI/2,Math.PI/2,false);d.lineTo(b,f+g)}d.closePath();d.fill();d.stroke()},_resize:function(a,d){this._view.size=this._direction=="y"?d:a;var b=this._canvasNode;this._ctx.clearRect(0,0,b.width,b.height);c.fx.apply(this._domNode,{width:a+1+"px",height:d+"px"});b.width=a;b.height=d;this._drawbar()},
_translateTo:function(a,d){this._view.x=a;this._view.y=d;c.fx.translate(this._domNode,a,d)}};return c.ui.layout.Scroller});
define(["../../../../_amd/core","../../../../math/_geometric/js/geometric","../../../../fx/_xyz/js/3dfx","../../../../ux/movementtracker/js/movementtracker"],function(c){c.ui.xyz.TagCloud=function(a){this.uId=c.getUId();this.selectedTextColor=this.textColor=this.size=null;this.scaleFactors={ratioDepth:0.6,ratioRating:0.8};this.canSelect=this.canMove=false;this.axis=null;this.shiftY=this.shiftX=0;this._isCircle=this._opacities=this._selection=this._selectCoords=this._overNode=this._domNode=this.tags=
this.asCircle=null;c.mixin(this,a);if(this._validateProperties()!==false){this._initProperties();this._initDom();this._initListeners()}};c.ui.xyz.TagCloud.prototype={_MAX_RATING:100,_Z_INDEX_BACKGROUND:5,_OPACITY_NOT_VISIBLE_FACE:0.2,_OPACITY_VISIBLE_FACE:0.98,_LIGHT_PI:c.math.round(Math.PI,3),_FRICTIONAL_FORCES:0.5,getDomNode:function(){return this._domNode},setTextColor:function(a,d){if(c.isSet(a))if(c.isSet(d)){this.textColor=a;this.selectedTextColor=d;this._updateTextColor()}},_validateProperties:function(){return true},
_raisePropertyError:function(a){c.log("[TagCloud] Error: "+a+" missing or invalid")},_initProperties:function(){this._isCircle=!c.isSet(this.asCircle)||!c.isSet(this.asCircle.tilt)?false:true;this._opacities=[];var a=this._OPACITY_NOT_VISIBLE_FACE,d=this.size*2+1,b=(this._OPACITY_VISIBLE_FACE-a)/(this.size*2),f=0;for(a=a;f<d;f++,a+=b)this._opacities[f]=c.math.round(a,2);d=this.tags.length;for(f=0;f<d;f++){b=this.tags[f];if(b.rating<0)b.rating=0;else if(b.rating>this._MAX_RATING)b.rating=this._MAX_RATING;
b.coeffRating=c.math.round(this.scaleFactors.ratioRating*(b.rating/this._MAX_RATING),2)}},_initDom:function(){this._domNode=document.createElement("div");this._overNode=document.createElement("div");this._domNode.appendChild(this._overNode);var a,d=this.tags.length;for(a=0;a<d;a++){var b=this.tags[a],f=document.createElement("div");this._domNode.appendChild(f);f.style.position="absolute";f.appendChild(c.byId(b.id));b.tagNode=f;b.colorOpacity=1}c.fx.apply(this._domNode,{position:"absolute",width:"100%",
height:"100%"});c.fx.apply(this._overNode,{position:"absolute",width:"100%",height:"100%","user-select":"none",zIndex:this._Z_INDEX_BACKGROUND});this._updateTextColor();this._initTransformations();this._slide(0.1,0.1)},_initListeners:function(){if(this.canMove==true||this.canSelect==true){this._movementtracker=new c.ux.MovementTracker({target:this._overNode});c.subscribe("/movementtracker/events/mvtbegin",{context:this,method:"_handleMovementBegin"});c.subscribe("/movementtracker/events/mvtchanged",
{context:this,method:"_handleMovementChanged"});c.subscribe("/movementtracker/events/mvtstored",{context:this,method:"_handleMovementStored"})}},_handleMovementBegin:function(a){if(a.publisher.uId==this._movementtracker.uId){this._dragging=false;if(this.canSelect==true){a=a.movement.pointStatement[0];var d=c.getPosition(this._overNode,null,true);this._selectCoords={x:a.x-d.x,y:a.y-d.y}}}},_handleMovementChanged:function(a){if(a.publisher.uId==this._movementtracker.uId)if(this.canMove==true){a=a.movement;
var d=a.pointStatement[a.pointStatement.length-2],b=a.pointStatement[a.pointStatement.length-1];a=b.x-d.x;d=b.y-d.y;b=c.math.getAngle(this.size,a);if(a<0)b=-b;a=c.math.getAngle(this.size,d);if(d<0)a=-a;this._dragging=true;this._slide(b,a)}},_handleMovementStored:function(a){a.publisher.uId==this._movementtracker.uId&&this._dragging==false&&this.canSelect==true&&this._handleChoice(this._selectCoords.x,this._selectCoords.y)},_slide:function(a,d){this._updateAngles(a,d);this._updateCoords();this._updateOpacity();
this._updateTextSize();this._applyTransformations()},_updateOpacity:function(){var a,d=this.tags.length;for(a=0;a<d;a++){var b=this.tags[a],f=c.math.round(b.coords.z+this.size,0),h=this._opacities[f];c.isSet(h)||c.log("[TagCloud] warn: opacity not defined for z-position "+f);b.colorOpacity=h}},_updateTextSize:function(){var a,d=this.tags.length;for(a=0;a<d;a++){var b=this.tags[a],f=c.math.round(b.coords.z+this.size,0);b.coeffDepth=c.math.round(this.scaleFactors.ratioDepth*(f/(this.size*2)),2);b.coeffScale=
b.coeffDepth+b.coeffRating}},_updateAngles:function(a,d){this._angleX=c.math.round(a*this._FRICTIONAL_FORCES%(this._LIGHT_PI*2),3);this._angleY=c.math.round(d*this._FRICTIONAL_FORCES%(this._LIGHT_PI*2),3)},_updateCoords:function(){var a,d=this.tags.length;for(a=0;a<d;a++){var b=this.tags[a],f=[b.coords.x,b.coords.y,b.coords.z],h=c.math.createTransformMatrix();if(this.axis=="x"||this.axis=="xy")h.rotateAxisAngle(1,0,0,c.math.radToDeg(this._angleY));var e=c.math.createTransformMatrix();if(this.axis==
"y"||this.axis=="xy")e.rotateAxisAngle(0,1,0,c.math.radToDeg(-this._angleX));f=c.math.multiplyMatrixVector(h.getValues(),f);e=c.math.multiplyMatrixVector(e.getValues(),f);f=e[0];h=e[1];var g=e[2];if(this._isCircle)if(this.axis=="x")f=e[2]*-this.asCircle.tilt;else h=e[2]*this.asCircle.tilt;b.coords={x:f,y:h,z:g}}},_applyTransformations:function(){var a,d=this.tags.length;for(a=0;a<d;a++){var b=this.tags[a];c.fx.setTransformPart(b.tagNode,1,{type:"scale",x:b.coeffScale,y:b.coeffScale,z:1});c.fx.setTransformPart(b.tagNode,
2,{type:"translate",x:b.coords.x,y:b.coords.y,z:b.coords.z});c.fx.applyComposedTransform(b.tagNode)}this._updateTextColor()},_handleChoice:function(a,d){this._selection=null;var b=this._getNearestFaceIndex(a,d);if(b!=null){this._selection=this.tags[b].tagNode;b=this.tags[b];this._updateTextColor();c.publish("/tagcloud/events/selection",{tag:b})}},_getNearestFaceIndex:function(a,d){var b=null,f=[],h,e=this.tags.length;for(h=0;h<e;h++){var g=this.tags[h],j=g.tagNode.offsetWidth,k=g.tagNode.offsetHeight,
o=j*g.coeffScale-j,r=k*g.coeffScale-k,m=g.coords.x+this.size+this.shiftX-o/2;g=g.coords.y+this.size+this.shiftY-r/2;j=m+j+o;k=g+k+r;k=d>g&&d<k;a>m&&a<j&&k&&f.push(h)}e=-this.size;for(h=0;h<f.length;h++){m=f[h];k=this.tags[m].coords.z;if(k>e){e=k;b=m}}return b},_initTransformations:function(){for(var a=this.size,d=c.math.round(this._LIGHT_PI*(3-Math.sqrt(5)),2),b=2/this.tags.length,f=2*Math.PI/this.tags.length,h=this.tags.length,e=0,g=0,j=1-b/2;e<h;e++,g+=d,j-=b){var k=this.tags[e];if(this._isCircle){var o=
0,r=0;if(this.axis=="x"){o=f*e;r=Math.PI/2}else o=f*e+Math.PI/2;k.coords={x:a*Math.cos(r)*Math.cos(o),y:a*Math.cos(o)*Math.sin(r),z:a*Math.sin(o)}}else{o=a*Math.sqrt(1-j*j);k.coords={x:Math.cos(g)*o,y:Math.sin(g)*o,z:j*a}}c.fx.initComposedTransform(k.tagNode)}c.fx.set3dTransform(this._domNode,{type:"translate",x:this.size+this.shiftX,y:this.size+this.shiftY,z:0});c.fx.set3dTransform(this._overNode,{type:"translate",x:-this.size-this.shiftX,y:-this.size-this.shiftY,z:this.size})},_updateTextColor:function(){if(c.isSet(this.textColor)){var a=
this.textColor,d,b=this.tags.length;for(d=0;d<b;d++){var f=this.tags[d];f.tagNode.style.color="rgba("+a.r+", "+a.g+", "+a.b+", "+f.colorOpacity+")"}}if(this._selection!=null&&c.isSet(this.selectedTextColor)){a=this.selectedTextColor;this._selection.style.color="rgba("+a.r+", "+a.g+", "+a.b+", 1)"}}};return c.ui.xyz.TagCloud});
define(["../../../../_amd/core"],function(c){c.ui.xy.ToggleButton=function(a){this.uId=c.getUId();this._switchBtnNode=this._domNode=this.position=this.cssClass=null;this._coordinates={beginX:0,pozX:0,dist:0,hasMoved:false};c.mixin(this,a);if(this._validateProperties()!==false){this._initProperties();this._initDom();this._initListeners()}};c.ui.xy.ToggleButton.prototype={_POSITION_LEFT:"left",_POSITION_RIGHT:"right",_LEFT:1,_RIGHT:0,getDomNode:function(){return this._domNode},_validateProperties:function(){return true},
_initProperties:function(){this.position=c.isSet(this.position)?this.position==this._POSITION_LEFT?this._LEFT:this._RIGHT:this._LEFT},_initDom:function(){this._domNode=document.createElement("div");this._domNode.className="to_toggle";c.isSet(this.cssClass)&&c.addClass(this._domNode,this.cssClass);this._switchBtnNode=document.createElement("div");this._switchBtnNode.className="to_toggle_btn";this._domNode.appendChild(this._switchBtnNode);this._translateButton((0-this.position)*44)},_initListeners:function(){c.ux.touch.addListener(this._domNode,
"start",{context:this,method:"_startdrag"},{preventDefault:true});c.ux.touch.addListener(this._domNode,"move",{context:this,method:"_drag"},{preventDefault:true});c.ux.touch.addListener(this._domNode,"end",{context:this,method:"_enddrag"},{preventDefault:true})},_translateButton:function(a){c.fx.translate(this._switchBtnNode,a,0)},_onSwitch:function(){this.position=1-this.position;c.fx.applyTransformTransition(this._switchBtnNode,"500ms","0ms","default");this._translateButton((0-this.position)*44);
this.position==this._LEFT?c.publish("/togglebutton/events/switch",{uId:this.uId,position:this._POSITION_LEFT}):c.publish("/togglebutton/events/switch",{uId:this.uId,position:this._POSITION_RIGHT})},_startdrag:function(a){this._coordinates.beginX=a.x;this._coordinates.pozX=a.x;this._coordinates.dist=0;this._coordinates.hasMoved=false;c.fx.applyTransformTransition(this._switchBtnNode,"0s","0s","default")},_drag:function(a){this._coordinates.hasMoved=true;this._coordinates.pozX=a.x;a=this._coordinates.pozX-
this._coordinates.beginX;if(this.position==this._RIGHT&&a>0||this.position==this._LEFT&&a<0)a=0;if(this.position==this._RIGHT&&a<=0&&a>=-44||this.position==this._LEFT&&a>=0&&a<=44){if(this.position==this._LEFT)a-=44;this._coordinates.dist=a;this._translateButton(this._coordinates.dist)}},_enddrag:function(){if(this._coordinates.hasMoved==false||this.position==this._RIGHT&&this._coordinates.dist!=0||this.position==this._LEFT&&this._coordinates.dist!=-44)this._onSwitch();this._coordinates.dist=0;this._coordinates.beginX=
0;this._coordinates.pozX=0;this._coordinates.hasMoved=false}};return c.ui.xy.ToggleButton});
define(["../../../../_amd/core"],function(c){c.ui.layout.SlidingPanels=function(a){this.uId=c.getUId();this.pages=null;this.transitionType="default";this.duration=800;this.HIGHER_INDEX=100;this.LOWER_INDEX=99;this._domNode=null;this._queue=[];this._pagesList=[];this._currentPage=this._firstPage=null;this._isSliding=false;c.mixin(this,a);if(this._validateProperties()!==false){this._initDom();this._initProperties()}};c.ui.layout.SlidingPanels.prototype={_TRANSITION_DEFAULT:"default",_TRANSITION_REVEAL:"reveal",
_TRANSITION_COVER:"cover",getDomNode:function(){return this._domNode},add:function(a){this._add([a])},remove:function(a,d){this._remove(a,d)},slideTo:function(a){if(!this._isSliding){var d=this._getQueueIndex(a);if(d!==false)d==this._queue.length-1?this.slideBack():this._silentSlideBack(a);else{d=this._firstPage;a=this._getPageById(a);var b=this.transitionType,f=this.duration,h=b==this._TRANSITION_REVEAL;b=b==this._TRANSITION_COVER;if(a!=null)this._slideStart({firstPage:d,currentPage:a,firstPageDuration:b?
"":f,currentPageDuration:h?"":f,pageToListen:h?d:a,slideEndHandler:c.bind(this._onSlideEnd,this,-1),firstPageTranslation:b?0:"-100%",firstPageZIndex:b?this.LOWER_INDEX:undefined,currentPageZIndex:b?this.HIGHER_INDEX:undefined})}}},slideBack:function(){if(!this._isSliding){var a=this._firstPage,d=this._queue.pop(),b=this.transitionType,f=this.duration,h=b==this._TRANSITION_REVEAL;this._slideStart({firstPage:a,currentPage:d,firstPageDuration:h?"":f,currentPageDuration:b==this._TRANSITION_COVER?"":f,
pageToListen:h?d:a,slideEndHandler:c.bind(this._onSlideEnd,this,1),firstPageTranslation:h?0:"100%",firstPageZIndex:h?this.LOWER_INDEX:undefined,currentPageZIndex:h?this.HIGHER_INDEX:undefined})}},_silentSlideBack:function(a){var d=this._getQueueIndex(a);a=this._queue.slice(d+1,this._queue.length);this._queue.splice(d+1,a.length);var b=a.length;for(d=0;d<b;d++){var f=a[d];f.setTranslateDuration(0);f.translate("100%");f.setPosition(1);this.transitionType!=this._TRANSITION_DEFAULT&&f.setZIndex(this.LOWER_INDEX)}this._firstPage=
this._currentPage;this.slideBack()},_slideStart:function(a){this._isSliding=true;c.publish("/slidingpanels/events/slidestart",{id:a.currentPage.id});this._currentPage=a.currentPage;a.firstPageZIndex&&a.firstPage.setZIndex(this.LOWER_INDEX);a.currentPageZIndex&&a.currentPage.setZIndex(this.HIGHER_INDEX);a.currentPage.display();a.firstPage.setTranslateDuration(a.firstPageDuration);a.currentPage.setTranslateDuration(a.currentPageDuration);c.fx.onTransitionEnd(a.pageToListen.getDomNode(),a.slideEndHandler);
a.firstPage.translate(a.firstPageTranslation,0);a.currentPage.translate(0)},_onSlideEnd:function(a){var d=this._firstPage,b=this._currentPage;if(this.transitionType!=this._TRANSITION_DEFAULT){d.setZIndex(this.LOWER_INDEX);b.setZIndex(this.HIGHER_INDEX)}d.setPosition(a);b.setPosition(0);a==-1&&this._queue.push(d);this._firstPage=this._currentPage;this._isSliding=false;c.publish("/slidingpanels/events/slideend",{id:b.id})},_getPageById:function(a){a=this._getPageIndex(a);if(a!==false)return this._pagesList[a];
return null},_getPageIndex:function(a){var d,b=this._pagesList,f=b.length;for(d=0;d<f;d++){var h=b[d];if(h.id==a&&h.position==1)return d}return false},_getQueueIndex:function(a){var d,b=this._queue,f=b.length;for(d=0;d<f;d++)if(b[d].id==a)return d;return false},_add:function(a){var d,b=a.length;for(d=0;d<b;d++){var f=this._getNewPage(a[d],this._pagesList.length==0),h=f.getDomNode();h.parentNode.removeChild(h);this._domNode.appendChild(h);this._pagesList.push(f);if(this._pagesList.length==1)this._firstPage=
f}},_remove:function(a,d){var b=d||{},f=this._getPageIndex(a);if(f!==false){var h=this._pagesList[f];b.fromdom&&this._domNode.removeChild(h.getDomNode());this._pagesList.splice(f,1)}},_getNewPage:function(a,d){var b=this.transitionType,f=new c.ui.layout.SlidingPanels.Page({node:c.byId(a)}),h=0,e=0;if(!d){h="100%";if(b==this._TRANSITION_REVEAL)h=0;e=1}f.translate(h);f.setPosition(e);if(b!=this._TRANSITION_DEFAULT)d?f.setZIndex(this.HIGHER_INDEX):f.setZIndex(this.LOWER_INDEX);return f},_validateProperties:function(){return true},
_initProperties:function(){this._add(this.pages);if(c.isInteger(this.duration))this.duration+="ms"},_initDom:function(){this._domNode=document.createElement("div");c.addClass(this._domNode,"sl_container")}};c.ui.layout.SlidingPanels.Page=function(a){this.uId=c.getUId();this.id=null;this.position=0;this._properties=a;this._domNode=null;this._toDefer=this._isDisplayed=false;this._initProperties();this._initDom()};c.ui.layout.SlidingPanels.Page.prototype={wkArOldIOS:c.ua.isIOS&&c.ua.osVersion<=2,getDomNode:function(){return this._domNode},
setPosition:function(a){this.position=a;if(this.position!=0){if(!this.wkArOldIOS){this._domNode.style.display="none";this._isDisplayed=false}}else c.fx.apply(this._domNode,{transform:"none"})},display:function(){this._domNode.style.display="block";if(this._isDisplayed==false)this._toDefer=this._isDisplayed=true},translate:function(a){var d,b={defered:c.bind(function(){d&&clearTimeout(d);c.fx.translate(this._domNode,a,null)},this)};if(this._toDefer){d=c.setTimeout(b,"defered",0);this._toDefer=false}else b.defered()},
setZIndex:function(a){this._domNode.style.zIndex=a},setTranslateDuration:function(a){c.fx.applyTransformTransition(this._domNode,a,"1ms","default")},_initDom:function(){c.addClass(this._domNode,"sl_page")},_initProperties:function(){this._domNode=this._properties.node;this.id=this._domNode.id}};return c.ui.layout.SlidingPanels});
define(["../../../../_amd/core"],function(c){c.ui.xy.ColorPicker=function(){if(c.isUndefined(c.ui.xy.ColorPicker.singleton)){this.uId=1;this._HEIGHT=276;this._WIDTH=230;this._template="";this._domNode=null;this._colors=["#000","#9F3F0F","#0F3F0F","#0F3F6F","#0E0E85","#3F4F3F","#870F0F","#87870F","#0F870F","#0F8787","#0F0FFF","#6F6F9F","#FF0000","#FF9F0F","#9FC000","#3FCFCF","#3F6FFF","#9F9F9F","#FF0FFF","#FFCF0F","#FFFF00","#0FFF0F","#0FFFFF","#0FCFFF","#9F3F6F","#FF9FCF","#FFCF9F","#FFFF9F","#CF9FFF",
"#FFF"];this._createTemplate();this._initDom();c.ui.xy.ColorPicker.singleton=this}else return c.ui.xy.ColorPicker.singleton};c.ui.xy.ColorPicker.prototype={show:function(){c.layer.show();c.fx.apply(this._domNode,{display:"block"});this.updatePosition()},hide:function(){c.layer.hide();this._domNode.style.display="none"},updatePosition:function(){c.fx.apply(this._domNode,{top:window.innerHeight>this._HEIGHT?(window.innerHeight-this._HEIGHT)/2+window.pageYOffset+"px":window.pageYOffset+"px",left:document.documentElement.offsetWidth>
this._WIDTH?(document.documentElement.offsetWidth-this._WIDTH)/2+window.pageXOffset+"px":window.pageXOffset+"px"})},_createTemplate:function(){var a=0,d=this._colors.length;this._template+='<div><div class="w_icon w_float w_button_close" onClick="(new wink.ui.xy.ColorPicker()).hide()"></div>';for(var b=0;b<d;b++){if(a==0)this._template+='<div class="cp_separator">';this._template+='<div class="cp_color" style="background-color: '+this._colors[b]+'" onClick="(new wink.ui.xy.ColorPicker())._selectColor(\''+
this._colors[b]+"')\"></div>";if(a==4){this._template+="</div>";a=0}else a++}this._template+="</div>"},_selectColor:function(a){c.publish("/colorpicker/events/pickcolor",{color:a});this.hide()},_initDom:function(){this._domNode=document.createElement("div");this._domNode.className="w_bloc w_window cp_colorpicker w_border w_radius w_bg_dark";this._domNode.style.display="none";this._domNode.innerHTML=this._template;document.body.appendChild(this._domNode)}};return c.ui.xy.ColorPicker});
